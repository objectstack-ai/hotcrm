---
title: Revenue Cloud
description: CPQ (Configure-Price-Quote), billing, and revenue management
---

## Overview

HotCRM's Revenue Cloud combines **Product Catalog** (`@hotcrm/products`) and **Financial Operations** (`@hotcrm/finance`) to provide complete Configure-Price-Quote (CPQ), billing, and revenue forecasting capabilities.

**Packages:** `@hotcrm/products` + `@hotcrm/finance`  
**Objects:** 13 | **AI Actions:** 6 | **Hooks:** 4

## Product Catalog & CPQ

### Product Management

**Object:** `product.object.ts`

Comprehensive product catalog with 7 product families:

```typescript
// Product families
families: [
  'Software',      // SaaS, licenses
  'Hardware',      // Physical products
  'Services',      // Professional services
  'Consulting',    // Advisory services
  'Training',      // Education & certification
  'Support',       // Maintenance & support
  'Subscription',  // Recurring subscriptions
]

// Key fields
{
  name,
  description,
  product_code,          // SKU
  family,                // Product family
  is_active,             // Active status
  list_price,            // Standard price
  cost,                  // Cost basis
  quantity_in_stock,     // Inventory
  reorder_level,         // Stock alert threshold
}
```

**AI Actions:**
- **Product Recommendations**: Suggest related products based on purchase history
- **Pricing Optimization**: AI-suggested pricing based on demand, competition
- **Inventory Forecasting**: Predict stock needs

### Product Bundles

**Object:** `product_bundle.object.ts`

Pre-configured product packages with intelligent recommendations:

```typescript
{
  name: 'product_bundle',
  fields: [
    'name',
    'description',
    'is_active',
    'pricing_method',      // Sum, Fixed, %Discount, AmountDiscount
    'total_price',
    'bundle_score',        // AI recommendation score
    'dependencies',        // Product dependencies
    'configuration_options', // JSON configuration
  ]
}
```

**Pricing Methods:**
1. **Sum**: Total of component prices
2. **Fixed**: Fixed bundle price
3. **Percentage Discount**: % off total
4. **Amount Discount**: Fixed amount off

**AI Features:**
- Bundle optimization (maximize margin + appeal)
- Cross-sell recommendations
- Configuration validation

### Intelligent Pricing

**Object:** `price_rule.object.ts`

7 pricing rule types with AI competitive analysis:

```typescript
// Price rule types
{
  types: [
    'Tiered',             // Volume-based tiers
    'Volume Discount',    // Bulk discounts
    'Contract Based',     // Enterprise agreements
    'Promotional',        // Time-limited offers
    'Dynamic',            // Market-based pricing
    'Subscription',       // Recurring pricing
    'Custom',             // Custom logic
  ],
  
  fields: [
    'name',
    'rule_type',
    'pricing_tiers',      // JSON array
    'min_quantity',
    'max_quantity',
    'discount_percentage',
    'start_date',
    'end_date',
    'approval_required',
    'ai_competitive_score', // AI market analysis
  ]
}
```

**Example Tiered Pricing:**
```json
{
  "tiers": [
    { "min": 1, "max": 10, "price": 100 },
    { "min": 11, "max": 50, "price": 90 },
    { "min": 51, "max": null, "price": 80 }
  ]
}
```

### Discount Schedules

**Object:** `discount_schedule.object.ts`

8 discount types with margin protection:

```typescript
// Discount types
{
  types: [
    'Seasonal',          // Holiday sales
    'Promotional',       // Marketing campaigns
    'Clearance',         // Inventory reduction
    'Early Bird',        // Pre-order discounts
    'End of Quarter',    // EOQ deals
    'Volume',            // Bulk purchase
    'Loyalty',           // Customer rewards
    'New Customer',      // Acquisition incentive
  ],
  
  features: [
    'approval_workflows',  // Requires manager approval
    'margin_protection',   // Minimum margin enforcement
    'usage_limits',        // Max redemptions
    'promotion_code',      // Coupon codes
    'performance_tracking', // ROI monitoring
  ]
}
```

### Quote Management

**Object:** `quote.object.ts`

Complete CPQ with approval workflows:

```typescript
{
  name: 'quote',
  fields: [
    'quote_number',        // Auto-generated
    'opportunity_id',      // Link to opportunity
    'account_id',          // Customer
    'status',              // Draft, Pending, Approved, Sent, Accepted, Rejected
    'valid_until',         // Expiration date
    'subtotal',
    'discount_total',
    'tax_total',
    'shipping_total',
    'grand_total',
    'payment_terms',       // Net 30, Net 60, etc.
    'approval_required',
    'approved_by',
  ]
}
```

**Object:** `quote_line_item.object.ts`

Individual quote line items:

```typescript
{
  fields: [
    'quote_id',
    'product_id',
    'quantity',
    'list_price',
    'discount_percentage',
    'discount_amount',
    'unit_price',          // Final price
    'subtotal',
    'description',
    'sort_order',
  ]
}
```

**Quote Workflow:**
```
Draft → Pending Approval → Approved → Sent → Accepted
                                            ↘ Rejected
```

## Financial Operations

### Contract Management

**Object:** `contract.object.ts`

Complete contract lifecycle management:

```typescript
{
  name: 'contract',
  fields: [
    'contract_number',     // Auto-generated
    'account_id',
    'status',              // Draft, InApproval, Activated, Completed, Terminated
    'start_date',
    'end_date',
    'contract_term',       // Months
    'contract_value',      // Total value
    'payment_terms',
    'billing_frequency',   // Monthly, Quarterly, Annual
    'auto_renewal',        // Boolean
    'renewal_notice_days', // Days before renewal
    'special_terms',       // Text
  ]
}
```

**AI Actions:**

#### Contract Risk Analysis
```typescript
// Analyzes contracts for:
- Compliance issues (GDPR, SOC2, HIPAA, ISO27001)
- Unfavorable terms
- Renewal risk
- Revenue recognition timing

// Returns: Risk score + Recommendations
```

#### Renewal Probability
```typescript
// Predicts contract renewal likelihood based on:
- Historical renewal rates
- Customer health score
- Product usage
- Support case volume
- Payment history

// Returns: Probability (0-100%) + Key factors
```

### Invoicing & Billing

**Object:** `invoice.object.ts`

Automated invoice generation and tracking:

```typescript
{
  name: 'invoice',
  fields: [
    'invoice_number',      // Auto-generated: INV-YYYY-000000
    'account_id',
    'contract_id',
    'status',              // Draft, Posted, Paid, Void
    'invoice_date',
    'due_date',
    'payment_terms',       // Net 15, Net 30, Net 60
    'subtotal',
    'tax_total',
    'total_amount',
    'amount_paid',
    'balance_due',
  ]
}
```

**Object:** `invoice_line.object.ts`

Invoice line items:

```typescript
{
  fields: [
    'invoice_id',
    'product_id',
    'description',
    'quantity',
    'unit_price',
    'amount',
  ]
}
```

**Auto-Generation:**
- Generate invoices from contracts (recurring)
- Generate invoices from quotes (one-time)
- Split invoices by milestone

### Payment Tracking

**Object:** `payment.object.ts`

8 payment types with tracking:

```typescript
// Payment types
{
  types: [
    'Down Payment',        // Initial deposit
    'Milestone',           // Project milestones
    'Delivery',            // On delivery
    'Acceptance',          // Post-acceptance
    'Final',               // Final payment
    'Recurring',           // Subscription
    'Maintenance',         // Support fees
    'Other',               // Custom
  ],
  
  fields: [
    'invoice_id',
    'payment_type',
    'payment_method',      // Credit Card, Wire, Check, ACH
    'planned_amount',
    'received_amount',
    'planned_date',
    'received_date',
    'status',              // Pending, Received, Overdue, Cancelled
  ]
}
```

**AI Actions:**

#### Payment Default Prediction
```typescript
// Predicts payment delays/defaults based on:
- Historical payment behavior
- Current financial health
- Industry trends
- Economic indicators

// Returns: Risk score + Recommended actions
```

#### Payment Date Estimation
```typescript
// Estimates actual payment date:
- Historical payment patterns
- Payment terms
- Customer segment

// Returns: Estimated date + Confidence level
```

## Revenue Intelligence

### Revenue Forecasting

**AI Action:** `revenue_forecast.action.ts`

Comprehensive revenue forecasting:

```typescript
// Forecast dimensions
{
  time_periods: ['Monthly', 'Quarterly', 'Annual'],
  categories: [
    'New Business',
    'Upsell',
    'Renewal',
    'Cross-sell',
  ],
  
  analysis_includes: [
    'Pipeline analysis',
    'Win rate trends',
    'Average deal size',
    'Sales cycle length',
    'Seasonal patterns',
    'YoY comparison',
  ]
}
```

**Risk Analysis:**
- Pipeline concentration (dependency on few large deals)
- Stale deals (no activity > 30 days)
- Expiring contracts (renewal risk)
- Competitive threats

**Output:**
```json
{
  "forecast_amount": 5000000,
  "confidence_level": 85,
  "risk_factors": [
    "High concentration: Top 3 deals = 60% of pipeline",
    "15 opportunities stale > 30 days"
  ],
  "recommendations": [
    "Diversify pipeline with mid-market deals",
    "Re-engage stale opportunities"
  ]
}
```

### Cash Flow Forecasting

Track and predict cash flow:

```typescript
// Based on:
- Invoice due dates
- Historical payment timing
- Payment default predictions
- Recurring revenue schedules

// Returns:
{
  "30_day_forecast": 500000,
  "60_day_forecast": 1200000,
  "90_day_forecast": 2100000,
  "collection_risk": "Medium"
}
```

## CPQ Workflow Example

```
1. Opportunity Created
   ↓
2. Create Quote
   ↓
3. Add Products/Bundles
   ↓
4. Apply Price Rules & Discounts
   ↓
5. Approval (if required)
   ↓
6. Send to Customer
   ↓
7. Customer Accepts
   ↓
8. Convert to Contract
   ↓
9. Generate Invoice(s)
   ↓
10. Track Payments
    ↓
11. Revenue Recognition
```

## API Examples

### Create a Quote

```typescript
POST /api/objects/quote
{
  "opportunity_id": "opp_123",
  "account_id": "acc_456",
  "valid_until": "2026-03-31",
  "payment_terms": "Net 30"
}
```

### Add Quote Line Items

```typescript
POST /api/objects/quote_line_item
{
  "quote_id": "quote_789",
  "product_id": "prod_abc",
  "quantity": 100,
  "discount_percentage": 10
}
```

### Approve Quote

```typescript
POST /api/actions/approve_quote
{
  "quote_id": "quote_789"
}
```

### Generate Invoice

```typescript
POST /api/actions/generate_invoice
{
  "contract_id": "contract_xyz"
}
```

## Getting Started

<Cards>
  <Card title="Products Package Docs" href="/docs/packages/products" />
  <Card title="Finance Package Docs" href="/docs/packages/finance" />
  <Card title="API Reference" href="/docs/packages/overview" />
</Cards>

## Learn More

- [Sales Intelligence](/docs/features/sales-intelligence) - CRM and pipeline
- [Service Excellence](/docs/features/service-excellence) - Customer support
- [Platform Extensibility](/docs/features/platform-extensibility) - Build custom apps
