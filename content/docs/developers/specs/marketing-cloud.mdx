---
title: Marketing Cloud
description: The Campaign Management and Lead Nurturing subsystem.
---

# Marketing Cloud Subsystem

**Marketing Cloud** is responsible for generating demand. It tracks the "ROI" of marketing spend and automates the nurturing of prospects until they are "Sales Ready".

## 1. Domain Model (Schema)

### 1.1 Core Objects (`packages/marketing`)

| Object Name | API Name | Description | Key Fields |
|-------------|----------|-------------|------------|
| **Campaign** | `campaign` | A marketing initiative. | `type`, `status`, `budget_cost`, `actual_cost` |
| **Campaign Member** | `campaign_member` | Link between Lead/Contact and Campaign. | `status` (Sent/Responded), `lead_id`, `contact_id` |
| **Web Form** | `web_form` | Landing page capture configuration. | `return_url`, `fields_json` |
| **Email Template** | `email_template` | HTML content for blasts. | `subject`, `body_html`, `merge_fields` |

## 2. Business Logic (Automation)

### 2.1 Campaign ROI Calculation (`campaign.rollup.hook.ts`)
- **Trigger**: `after_update` on Opportunity.
- **Logic**: 
    - Identify Primary Campaign Source.
    - Sum `Opportunity.amount` where `IsWon = true`.
    - Update `Campaign.value_won_opportunities`.
    - Calc `ROI` = `(Value Won - Cost) / Cost`.

### 2.2 Lead Scoring Engine (`lead.score.action.ts`)
Increments a score based on behavior.
- **Rule 1**: Clicked Email Link (+5 points).
- **Rule 2**: Visited Pricing Page (+10 points).
- **Rule 3**: Job Title contains "VP" (+20 points).
- **Threshold**: If Score > 50, update Status to "Marketing Qualified".

## 3. User Experience (UI)

### 3.1 Marketing Dashboard (`marketing_cmo.dashboard.ts`)
- **Visuals**: 
    - "Pipeline Generated by Campaign Type" (Pie).
    - "Cost per Lead (CPL)" trends.

### 3.2 Campaign Calendar (`campaign.view.ts`)
- **Type**: `calendar`
- **Fields**: `start_date`, `end_date`, `type`.

## 4. Security & Access

- **Marketing User**: Create Campaigns, Import Leads.
- **Sales User**: Read Campaigns, View Campaign History on Contact.
