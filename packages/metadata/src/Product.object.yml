# Product Object Definition
# äº§å“ç®¡ç† - Sales Force Automation Domain
# Follows @objectstack/spec standard for enterprise CRM

name: Product
label: äº§å“
labelPlural: äº§å“
icon: box
description: äº§å“å’ŒæœåŠ¡ç›®å½•ç®¡ç†

# Enable core features
features:
  searchable: true
  trackFieldHistory: true
  enableNotes: true
  enableAttachments: true

# Field Definitions
fields:
  # Basic Information
  - name: Name
    type: text
    label: äº§å“åç§°
    required: true
    searchable: true
    length: 255
    
  - name: ProductCode
    type: text
    label: äº§å“ä»£ç 
    unique: true
    searchable: true
    length: 50
    description: SKU æˆ–äº§å“ç¼–ç 
    
  - name: Description
    type: textarea
    label: äº§å“æè¿°
    length: 32000
    searchable: true
    
  - name: Family
    type: select
    label: äº§å“ç³»åˆ—
    options:
      - label: è½¯ä»¶äº§å“
        value: Software
      - label: ç¡¬ä»¶äº§å“
        value: Hardware
      - label: ä¸“ä¸šæœåŠ¡
        value: Professional Services
      - label: å’¨è¯¢æœåŠ¡
        value: Consulting
      - label: åŸ¹è®­æœåŠ¡
        value: Training
      - label: æ”¯æŒæœåŠ¡
        value: Support
      - label: è®¢é˜…æœåŠ¡
        value: Subscription
      - label: å…¶ä»–
        value: Other
        
  # Status
  - name: IsActive
    type: checkbox
    label: å¯ç”¨
    defaultValue: true
    
  - name: CanUseQuantitySchedule
    type: checkbox
    label: æ”¯æŒæ•°é‡è®¡åˆ’
    defaultValue: false
    
  - name: CanUseRevenueSchedule
    type: checkbox
    label: æ”¯æŒæ”¶å…¥è®¡åˆ’
    defaultValue: false
    
  # Pricing (åŸºç¡€å®šä»·ï¼Œå®é™…ä»·æ ¼åœ¨ Pricebook Entry ä¸­ç®¡ç†)
  - name: ListPrice
    type: currency
    label: æ ‡å‡†ä»·æ ¼
    precision: 2
    description: å»ºè®®é›¶å”®ä»·
    
  - name: CostPrice
    type: currency
    label: æˆæœ¬ä»·
    precision: 2
    
  # Inventory
  - name: QuantityUnitOfMeasure
    type: select
    label: è®¡é‡å•ä½
    options:
      - label: ä¸ª
        value: Unit
      - label: å¥—
        value: Set
      - label: å°
        value: Device
      - label: è®¸å¯è¯
        value: License
      - label: ç”¨æˆ·æ•°
        value: User
      - label: å°æ—¶
        value: Hour
      - label: å¤©
        value: Day
      - label: æœˆ
        value: Month
      - label: å¹´
        value: Year
        
  - name: QuantityInStock
    type: number
    label: åº“å­˜æ•°é‡
    precision: 0
    
  - name: ReorderLevel
    type: number
    label: è¡¥è´§è­¦æˆ’çº¿
    precision: 0
    
  - name: StockStatus
    type: select
    label: åº“å­˜çŠ¶æ€
    readonly: true
    options:
      - label: âœ… å……è¶³
        value: In Stock
      - label: âš ï¸ åä½
        value: Low Stock
      - label: âŒ ç¼ºè´§
        value: Out of Stock
      - label: ğŸ”„ è¡¥è´§ä¸­
        value: Reordering
        
  # Specifications
  - name: ProductType
    type: select
    label: äº§å“ç±»å‹
    options:
      - label: å®ç‰©äº§å“
        value: Physical
      - label: æ•°å­—äº§å“
        value: Digital
      - label: æœåŠ¡
        value: Service
      - label: è®¢é˜…
        value: Subscription
        
  - name: Weight
    type: number
    label: é‡é‡ (kg)
    precision: 2
    
  - name: Dimensions
    type: text
    label: å°ºå¯¸ (cm)
    length: 50
    description: é•¿xå®½xé«˜ï¼Œä¾‹å¦‚ï¼š30x20x10
    
  # Vendor
  - name: VendorName
    type: text
    label: ä¾›åº”å•†
    length: 255
    
  - name: VendorProductCode
    type: text
    label: ä¾›åº”å•†äº§å“ç¼–ç 
    length: 50
    
  # URLs
  - name: ProductUrl
    type: url
    label: äº§å“é¡µé¢
    
  - name: ImageUrl
    type: url
    label: äº§å“å›¾ç‰‡
    
  # Sales Information
  - name: MinimumOrderQuantity
    type: number
    label: æœ€å°è®¢è´­é‡
    precision: 0
    defaultValue: 1
    
  - name: MaximumOrderQuantity
    type: number
    label: æœ€å¤§è®¢è´­é‡
    precision: 0
    
  # AI Enhancement Fields
  - name: AISalesPoints
    type: textarea
    label: AI é”€å”®å–ç‚¹
    readonly: true
    length: 2000
    description: AI ç”Ÿæˆçš„äº§å“é”€å”®è¯æœ¯å’Œä¼˜åŠ¿
    
  - name: AIRecommendedProducts
    type: text
    label: AI æ¨èæ­é…äº§å“
    readonly: true
    length: 500
    description: æ™ºèƒ½æ¨èçš„å…³è”äº§å“ç»„åˆ
    
  - name: AIPricingStrategy
    type: textarea
    label: AI å®šä»·ç­–ç•¥å»ºè®®
    readonly: true
    length: 1000

# Relationships
relationships:
  - name: PricebookEntries
    type: hasMany
    object: PricebookEntry
    foreignKey: ProductId
    label: ä»·æ ¼è¡¨æ¡ç›®
    
  - name: OpportunityLineItems
    type: hasMany
    object: OpportunityLineItem
    foreignKey: ProductId
    label: å•†æœºäº§å“æ˜ç»†
    
  - name: QuoteLineItems
    type: hasMany
    object: QuoteLineItem
    foreignKey: ProductId
    label: æŠ¥ä»·å•æ˜ç»†

# List Views
listViews:
  - name: AllProducts
    label: æ‰€æœ‰äº§å“
    filters: []
    columns:
      - Name
      - ProductCode
      - Family
      - IsActive
      - ListPrice
      - QuantityInStock
      - StockStatus
    sortBy: Name
    sortOrder: asc
    
  - name: ActiveProducts
    label: å¯ç”¨çš„äº§å“
    filters:
      - field: IsActive
        operator: equals
        value: true
    columns:
      - Name
      - ProductCode
      - Family
      - ListPrice
      - QuantityInStock
    sortBy: Name
    sortOrder: asc
    
  - name: SoftwareProducts
    label: è½¯ä»¶äº§å“
    filters:
      - field: Family
        operator: equals
        value: Software
      - field: IsActive
        operator: equals
        value: true
    columns:
      - Name
      - ProductCode
      - Description
      - ListPrice
    sortBy: Name
    sortOrder: asc
    
  - name: Services
    label: æœåŠ¡äº§å“
    filters:
      - field: Family
        operator: in
        value: [Professional Services, Consulting, Training, Support]
      - field: IsActive
        operator: equals
        value: true
    columns:
      - Name
      - Family
      - QuantityUnitOfMeasure
      - ListPrice
    sortBy: Family
    sortOrder: asc
    
  - name: LowStock
    label: åº“å­˜ä¸è¶³
    filters:
      - field: StockStatus
        operator: in
        value: [Low Stock, Out of Stock]
      - field: IsActive
        operator: equals
        value: true
    columns:
      - Name
      - ProductCode
      - QuantityInStock
      - ReorderLevel
      - StockStatus
    sortBy: QuantityInStock
    sortOrder: asc

# Page Layout
pageLayout:
  sections:
    - label: äº§å“ä¿¡æ¯
      columns: 2
      fields:
        - Name
        - ProductCode
        - Family
        - ProductType
        - IsActive
        
    - label: å®šä»·ä¿¡æ¯
      columns: 2
      fields:
        - ListPrice
        - CostPrice
        - QuantityUnitOfMeasure
        - MinimumOrderQuantity
        - MaximumOrderQuantity
        
    - label: åº“å­˜ç®¡ç†
      columns: 2
      fields:
        - QuantityInStock
        - ReorderLevel
        - StockStatus
        - CanUseQuantitySchedule
        - CanUseRevenueSchedule
        
    - label: è§„æ ¼å‚æ•°
      columns: 2
      fields:
        - Weight
        - Dimensions
        
    - label: ä¾›åº”å•†ä¿¡æ¯
      columns: 2
      fields:
        - VendorName
        - VendorProductCode
        
    - label: é“¾æ¥
      columns: 2
      fields:
        - ProductUrl
        - ImageUrl
        
    - label: AI é”€å”®åŠ©æ‰‹
      columns: 1
      fields:
        - AISalesPoints
        - AIRecommendedProducts
        - AIPricingStrategy
        
    - label: æè¿°
      columns: 1
      fields:
        - Description

# Validation Rules
validationRules:
  - name: ListPriceGreaterThanCost
    errorMessage: æ ‡å‡†ä»·æ ¼åº”é«˜äºæˆæœ¬ä»·
    formula: |
      AND(
        NOT(ISBLANK(ListPrice)),
        NOT(ISBLANK(CostPrice)),
        ListPrice < CostPrice
      )
      
  - name: MaxQuantityGreaterThanMin
    errorMessage: æœ€å¤§è®¢è´­é‡å¿…é¡»å¤§äºæœ€å°è®¢è´­é‡
    formula: |
      AND(
        NOT(ISBLANK(MinimumOrderQuantity)),
        NOT(ISBLANK(MaximumOrderQuantity)),
        MaximumOrderQuantity < MinimumOrderQuantity
      )
      
  - name: ReorderLevelWarning
    errorMessage: è¡¥è´§è­¦æˆ’çº¿å»ºè®®è®¾ç½®ä¸ºæœ€å°è®¢è´­é‡çš„2å€
    formula: |
      AND(
        NOT(ISBLANK(ReorderLevel)),
        NOT(ISBLANK(MinimumOrderQuantity)),
        ReorderLevel < MinimumOrderQuantity * 2
      )

# Triggers
triggers:
  - name: StockStatusCalculation
    event: beforeInsert, beforeUpdate
    description: æ ¹æ®åº“å­˜æ•°é‡è‡ªåŠ¨æ›´æ–°åº“å­˜çŠ¶æ€
    
  - name: ProductAISuggestions
    event: afterInsert, afterUpdate
    description: AI ç”Ÿæˆé”€å”®å–ç‚¹å’Œæ¨èæ­é…
